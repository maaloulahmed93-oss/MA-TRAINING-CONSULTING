# โก ุงูุญู ุงูููุฑู ูุฎุทุฃ 401 - Signed URLs

## ๐ฏ ุงููุดููุฉ
ุงูุฑูุงุจุท ุงููุจุงุดุฑุฉ ููููุงุช Cloudinary ูุง ุชุฒุงู ุชูุดู ุจุฎุทุฃ 401.

## โ ุงูุญู ุงููุทุจู (ููุฑู)

ุจุฏูุงู ูู ุงูุชุธุงุฑ ุชุบููุฑ ุฅุนุฏุงุฏุงุช Cloudinaryุ ุชู ุชุทุจูู **Signed URLs**.

### ูุง ูู Signed URLsุ
- ุฑูุงุจุท ููููุนุฉ ุชุนูู ูุน ุงููููุงุช ุงููุญููุฉ
- ุตุงูุญุฉ ููุฏุฉ ุณุงุนุฉ ูุงุญุฏุฉ
- ุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ ูู ุทูุจ ุชุญููู
- **ูุง ุชุญุชุงุฌ ุชุดุบูู ุฃู script!**

---

## ๐ง ููู ูุนููุ

### ูุจู ุงูุฅุตูุงุญ:
```javascript
// Redirect ูุจุงุดุฑ ุฅูู Cloudinary
return res.redirect(filePath);
// โ ููุดู ุฅุฐุง ูุงู ุงูููู ูุญูู (authenticated)
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```javascript
// 1. ุงุณุชุฎุฑุงุฌ public_id ูู URL
const publicId = extractPublicId(filePath);

// 2. ุฅูุดุงุก signed URL ุตุงูุญ ูุณุงุนุฉ
const signedUrl = cloudinary.url(publicId, {
  resource_type: 'raw',
  sign_url: true,
  expires_at: now + 3600 // 1 hour
});

// 3. Redirect ุฅูู ุงูุฑุงุจุท ุงูููููุน
return res.redirect(signedUrl);
// โ ูุนูู ุญุชู ูุน ุงููููุงุช ุงููุญููุฉ
```

---

## ๐ ุงูุงุณุชุฎุฏุงู

### ูุง ููุฌุฏ ุดูุก ููููุงู ุจู!

ุงูุฅุตูุงุญ ูุนูู ุชููุงุฆูุงู:

1. **ุงููุณุชุฎุฏู ูุถุบุท "ุชุญููู" ูู Admin Panel**
2. **Backend ูุณุชูุจู ุงูุทูุจ**
3. **ููุชุดู ุฃู ุงูููู ุนูู Cloudinary**
4. **ููุดุฆ signed URL ุชููุงุฆูุงู**
5. **ููุนูุฏ ุชูุฌูู ุงููุณุชุฎุฏู ููุฑุงุจุท ุงูููููุน**
6. **ุงูุชุญููู ูุนูู! โ**

---

## โฑ๏ธ ูุชู ูุนููุ

**ุจุนุฏ Render Deployment:**
- ุงูุชุญุฏูุซ ุชู ุฑูุนู ุฅูู GitHub
- Render ุณูุนูุฏ ุงููุดุฑ ุชููุงุฆูุงู (2-3 ุฏูุงุฆู)
- ุจุนุฏ ุงูุชูุงุก ุงููุดุฑุ ุฌุฑูุจ ุงูุชุญููู ูุฑุฉ ุฃุฎุฑู

**ุฑุงูุจ ุงููุดุฑ:**
```
https://dashboard.render.com/web/matc-backend
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### ุงูุทุฑููุฉ 1: ูู Admin Panel

1. ุงูุชุญ: https://admine-lake-ten.vercel.app/attestations
2. ุงุฎุชุฑ ุดูุงุฏุฉ
3. ุงุถุบุท ุฃููููุฉ ุงูุชุญููู (Download)
4. **ูุฌุจ ุฃู ูุนูู ุงูุขู! โ**

### ุงูุทุฑููุฉ 2: ูู API ูุจุงุดุฑุฉ

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://matc-backend.onrender.com/api/attestations/CERT-2025-M-M-003/download/recommandation
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ููุนูุฏ ุชูุฌููู ุฅูู signed URL
- ูุจุฏุฃ ุงูุชุญููู ุชููุงุฆูุงู
- ูุง ููุฌุฏ ุฎุทุฃ 401

---

## ๐ ุงููุฑู ุจูู ุงูุญููู

| ุงูุญู | ุงูููุช | ูุญุชุงุฌ scriptุ | ูุนูู ููุฑุงูุ |
|------|-------|---------------|-------------|
| **Signed URLs** (ุงููุทุจู) | 2-3 ุฏูุงุฆู | โ ูุง | โ ูุนู |
| ุชุบููุฑ access_mode | 5+ ุฏูุงุฆู | โ ูุนู | โ ูุง |
| ุฅุนุงุฏุฉ ุฑูุน ุงููููุงุช | 10+ ุฏูุงุฆู | โ ูุนู | โ ูุง |

**Signed URLs ูู ุงูุฃุณุฑุน ูุงูุฃุณูู!**

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุฑูุงุจุท ุตุงูุญุฉ ูุณุงุนุฉ ูุงุญุฏุฉ
- ุจุนุฏ ุณุงุนุฉุ ุงูุฑุงุจุท ููุชูู
- ููู ุนูุฏ ุทูุจ ุชุญููู ุฌุฏูุฏุ ูููุดุฃ ุฑุงุจุท ุฌุฏูุฏ ุชููุงุฆูุงู
- ูุฐุง ุทุจูุนู ูุขูู

### 2. ูุง ุชุญุชุงุฌ ุชุดุบูู ุฃู ุดูุก
- ุงูููุฏ ูุนูู ุชููุงุฆูุงู
- ูุง scripts
- ูุง ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ

### 3. ูุนูู ูุน ุฌููุน ุงููููุงุช
- ุงููููุงุช ุงููุฏููุฉ โ
- ุงููููุงุช ุงูุฌุฏูุฏุฉ โ
- ุงููุญููุฉ ูุงูุนุงูุฉ โ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูุฒุงู ูุนุทู 401

**ุงูุณุจุจ:** Render ูู ูุนูุฏ ุงููุดุฑ ุจุนุฏ

**ุงูุญู:**
1. ุงูุชุญ: https://dashboard.render.com/web/matc-backend
2. ุชุญูู ูู ุขุฎุฑ deployment
3. ุงูุชุธุฑ ุญุชู ูุธูุฑ "Live" ุจุงูููู ุงูุฃุฎุถุฑ
4. ุญุงูู ูุฑุฉ ุฃุฎุฑู

---

### ุงููุดููุฉ: "Error generating signed URL"

**ุงูุณุจุจ:** ูุชุบูุฑุงุช Cloudinary ููููุฏุฉ

**ุงูุญู:**
1. Render Dashboard โ Environment
2. ุชุฃูุฏ ูู ูุฌูุฏ:
   - `CLOUDINARY_CLOUD_NAME`
   - `CLOUDINARY_API_KEY`
   - `CLOUDINARY_API_SECRET`

---

### ุงููุดููุฉ: ุงูุชุญููู ุจุทูุก

**ุงูุณุจุจ:** Backend ูู ูุถุน sleep

**ุงูุญู:**
1. ุงูุชุญ: https://matc-backend.onrender.com/api/health
2. ุงูุชุธุฑ 30 ุซุงููุฉ ุญุชู ูุณุชููุธ
3. ุญุงูู ุงูุชุญููู ูุฑุฉ ุฃุฎุฑู

---

## ๐ ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅุตูุงุญู:
- โ Signed URLs ุชููุดุฃ ุชููุงุฆูุงู
- โ ุชุนูู ูุน ุงููููุงุช ุงููุญููุฉ
- โ ูุง ุชุญุชุงุฌ scripts ุฃู ุฅุนุฏุงุฏุงุช
- โ ุตุงูุญุฉ ูุณุงุนุฉ ูุงุญุฏุฉ

### ุงูุฎุทูุงุช ุงูุชุงููุฉ:
1. โณ ุงูุชุธุฑ Render deployment (2-3 ุฏูุงุฆู)
2. โ ุฌุฑูุจ ุงูุชุญููู ูู Admin Panel
3. ๐ ูุฌุจ ุฃู ูุนูู!

### ุฅุฐุง ูู ูุนูู:
- ุชุญูู ูู Render deployment status
- ุงูุชุญ `/api/health` ูุฅููุงุธ Backend
- ุงูุชุธุฑ ุฏูููุฉ ูุญุงูู ูุฑุฉ ุฃุฎุฑู

---

**Commit:** `e0b366f`  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู  
**ุงูููุช ุงููุชููุน:** 2-3 ุฏูุงุฆู
