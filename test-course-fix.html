<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Course Ù„Ø§ ÙŠØ­ÙØ¸</title>
    <style>
        body { font-family: Arial; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .success { background: #d4edda; padding: 15px; border-radius: 5px; color: #155724; margin: 10px 0; }
        .info { background: #d1ecf1; padding: 15px; border-radius: 5px; color: #0c5460; margin: 10px 0; }
        .warning { background: #fff3cd; padding: 15px; border-radius: 5px; color: #856404; margin: 10px 0; }
        .fix { background: #e7f3ff; padding: 15px; border-radius: 5px; border-left: 4px solid #007bff; margin: 10px 0; }
        .code { background: #f8f9fa; padding: 10px; border-radius: 5px; font-family: monospace; font-size: 12px; overflow-x: auto; }
        .step { background: #f8f9fa; padding: 15px; border-radius: 5px; border: 1px solid #dee2e6; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Course Ù„Ø§ ÙŠØ­ÙØ¸</h1>
        
        <div class="warning">
            <h3>âŒ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…ÙƒØªØ´ÙØ©:</h3>
            <p>Ø§Ù„ÙƒÙˆØ±Ø³ "Ø¬Ù„Ù„" ÙŠØ¶Ø§Ù Ù„ÙƒÙ† ÙŠØ®ØªÙÙŠ Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø£Ùˆ Ø§Ù„Ø­ÙØ¸</p>
            <p><strong>Ø§Ù„Ø³Ø¨Ø¨:</strong> Ø¹Ø¯Ù… ØªØ²Ø§Ù…Ù† Ø¨ÙŠÙ† <code>formationCourses</code> Ùˆ <code>formations.courses</code></p>
        </div>

        <div class="fix">
            <h3>ğŸ”§ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:</h3>
            
            <h4>1. Ø¥ØµÙ„Ø§Ø­ addCourse Function:</h4>
            <div class="code">
// Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ âŒ
const addCourse = () => {
  setFormationCourses(prev => ({
    ...prev,
    [selectedFormation]: [...prev[selectedFormation] || [], newCourse.trim()]
  }));
  // Ù„Ø§ ÙŠØ­ÙØ¸ ÙÙŠ formations array âŒ
};

// Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ âœ…
const addCourse = () => {
  // Update formationCourses for UI display
  setFormationCourses(prev => ({...}));
  
  // Also update the formations array to persist the course âœ…
  setFormations(prev => {
    const updated = prev.map(formation => {
      if (formation.title === selectedFormation) {
        const newCourseObj = {
          id: `course-${Date.now()}`,
          title: newCourse.trim(),
          description: "",
          progress: 0,
          isCompleted: false,
          duration: "0",
          modules: [],
          sessions: []
        };
        return {
          ...formation,
          courses: [...(formation.courses || []), newCourseObj]
        };
      }
      return formation;
    });
    return updated;
  });
};
            </div>

            <h4>2. Ø¥ØµÙ„Ø§Ø­ removeCourse Function:</h4>
            <div class="code">
// Ø§Ù„Ø¢Ù† ÙŠØ­Ø°Ù Ù…Ù† ÙƒÙ„Ø§ Ø§Ù„Ù…ÙƒØ§Ù†ÙŠÙ† âœ…
const removeCourse = (courseIndex: number) => {
  // Update formationCourses for UI display
  setFormationCourses(prev => ({...}));
  
  // Also update the formations array to persist the removal
  setFormations(prev => {
    const updated = prev.map(formation => {
      if (formation.title === selectedFormation) {
        return {
          ...formation,
          courses: (formation.courses || []).filter((_, i) => i !== courseIndex)
        };
      }
      return formation;
    });
    return updated;
  });
};
            </div>

            <h4>3. Ø¥ØµÙ„Ø§Ø­ handleSubmit Function:</h4>
            <div class="code">
// Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ âŒ - ÙŠØ¹ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ courses Ù…Ù† formationCourses
const mergedFormations = formations.map(f => {
  const courseTitles = formationCourses[f.title] || [];
  // ÙŠÙÙ‚Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ f.courses âŒ
});

// Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­ âœ… - ÙŠØ³ØªØ®Ø¯Ù… courses Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
const mergedFormations = formations.map(f => {
  const updatedCourses = (f.courses || []).map(course => {
    const courseKey = `${f.title}-${course.title}`;
    const sessionsForCourse = courseSessions[courseKey] || course.sessions || [];
    return { ...course, sessions: sessionsForCourse };
  });
  return { ...f, courses: updatedCourses };
});
            </div>
        </div>

        <div class="success">
            <h3>âœ… Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:</h3>
            <ul>
                <li>Ø§Ù„ÙƒÙˆØ±Ø³ "Ø¬Ù„Ù„" Ø³ÙŠØ­ÙØ¸ ÙˆÙ„Ù† ÙŠØ®ØªÙÙŠ</li>
                <li>Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø³ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</li>
                <li>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªØ­ÙØ¸ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¹Ù†Ø¯ Ø§Ù„Ù€ Submit</li>
                <li>Ù„Ø§ Ù…Ø²ÙŠØ¯ Ù…Ù† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
            </ul>
        </div>

        <div class="step">
            <h3>ğŸ§ª Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¢Ù†:</h3>
            <ol>
                <li>Ø§ÙØªØ­ Admin Panel â†’ Participants</li>
                <li>Ø§Ø¶ØºØ· "Ajouter" Ø£Ùˆ Ø¹Ø¯Ù„ Ù…Ø´Ø§Ø±Ùƒ Ù…ÙˆØ¬ÙˆØ¯</li>
                <li>Ø§Ø°Ù‡Ø¨ Ù„ØªØ¨ÙˆÙŠØ¨ "Formations & Projets"</li>
                <li>Ø£Ø¶Ù Formation Ø¬Ø¯ÙŠØ¯</li>
                <li>Ø§Ø¶ØºØ· "Cours" â†’ Ø£Ø¶Ù ÙƒÙˆØ±Ø³ "Ø¬Ù„Ù„"</li>
                <li>Ø§Ø¶ØºØ· "Fermer" Ø«Ù… Ø§ÙØªØ­ "Cours" Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</li>
                <li><strong>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</strong> Ø§Ù„ÙƒÙˆØ±Ø³ "Ø¬Ù„Ù„" ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© âœ…</li>
            </ol>
        </div>

        <div class="info">
            <h3>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª:</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #f8f9fa;">
                    <th style="border: 1px solid #dee2e6; padding: 8px; text-align: right;">Ø§Ù„ÙˆØ¸ÙŠÙØ©</th>
                    <th style="border: 1px solid #dee2e6; padding: 8px; text-align: right;">Ù‚Ø¨Ù„ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</th>
                    <th style="border: 1px solid #dee2e6; padding: 8px; text-align: right;">Ø¨Ø¹Ø¯ Ø§Ù„Ø¥ØµÙ„Ø§Ø­</th>
                </tr>
                <tr>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">addCourse</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ­ÙØ¸ ÙÙŠ formationCourses ÙÙ‚Ø·</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ­ÙØ¸ ÙÙŠ ÙƒÙ„Ø§ Ø§Ù„Ù…ÙƒØ§Ù†ÙŠÙ† âœ…</td>
                </tr>
                <tr>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">removeCourse</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ­Ø°Ù Ù…Ù† formationCourses ÙÙ‚Ø·</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ­Ø°Ù Ù…Ù† ÙƒÙ„Ø§ Ø§Ù„Ù…ÙƒØ§Ù†ÙŠÙ† âœ…</td>
                </tr>
                <tr>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">handleSubmit</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ¹ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ courses</td>
                    <td style="border: 1px solid #dee2e6; padding: 8px;">ÙŠØ³ØªØ®Ø¯Ù… courses Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© âœ…</td>
                </tr>
            </table>
        </div>

        <div class="warning">
            <h3>âš ï¸ Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</h3>
            <ul>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Console</li>
                <li>ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù€ Formation ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨Ù†Ø¬Ø§Ø­</li>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† selectedFormation ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©</li>
                <li>Ø£Ø±Ø³Ù„ screenshot Ù„Ù„Ù…Ø´ÙƒÙ„Ø©</li>
            </ul>
        </div>

        <div class="success">
            <h3>ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©:</h3>
            <p><strong>ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Course Ù„Ø§ ÙŠØ­ÙØ¸!</strong></p>
            <p>Ø§Ù„Ø¢Ù† Ø§Ù„ÙƒÙˆØ±Ø³Ø§Øª Ø³ØªØ­ÙØ¸ ÙÙŠ ÙƒÙ„Ø§ Ù…Ù† UI state Ùˆ formations arrayØŒ Ù…Ù…Ø§ ÙŠØ¶Ù…Ù† Ø¹Ø¯Ù… ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>
        </div>
    </div>
</body>
</html>
